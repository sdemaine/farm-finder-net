(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{26042:function(e,t,s){Promise.resolve().then(s.bind(s,10912)),Promise.resolve().then(s.bind(s,61481)),Promise.resolve().then(s.bind(s,75660))},75660:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return R}});var r=s(57437),a=s(2265),n=s(48977),i=s(70707),o=s(55393),l=s(16429),c=s(77691),d=s.n(c);function u(e){let[t,s]=(0,a.useState)();return(0,a.useEffect)(()=>{let t=e.subscribe(s);return()=>t.unsubscribe()},[e]),t}s(60966);var m=s(26061),f=s(30213),h=s(11818);class x{async fetchFarms(){this.loadingSubject.next(!0),this.errorSubject.next(null);let{data:e,error:t}=await this.supabase.from("farms").select("*");t?(console.error("Error fetching farms:",t),this.errorSubject.next(t.message)):this.farmsSubject.next(e),this.loadingSubject.next(!1)}getFarmsObservable(){return this.farmsSubject.asObservable()}async addFarm(e){let{data:t,error:s}=await this.supabase.from("farms").insert([e]).select();if(s){console.error("Error adding farm:",s),this.errorSubject.next(s.message);return}let r=this.farmsSubject.getValue();this.farmsSubject.next([...r,t[0]])}async updateFarm(e,t){let{data:s,error:r}=await this.supabase.from("farms").update(t).eq("id",e).select();if(r){console.error("Error updating farm:",r),this.errorSubject.next(r.message);return}let a=this.farmsSubject.getValue().map(t=>t.id===e?{...t,...s[0]}:t);this.farmsSubject.next(a)}async deleteFarm(e){let{error:t}=await this.supabase.from("farms").delete().eq("id",e);if(t){console.error("Error deleting farm:",t),this.errorSubject.next(t.message);return}let s=this.farmsSubject.getValue().filter(t=>t.id!==e);this.farmsSubject.next(s)}async searchFarms(e,t,s){this.loadingSubject.next(!0),this.errorSubject.next(null);try{let r=(t-1)*s,{data:a,error:n,count:i}=await this.supabase.from("farms").select("*",{count:"exact"}).or("name.ilike.%".concat(e,"%,products.cs.{").concat(e,"}")).range(r,r+s-1);if(n)throw n;return{farms:a,totalCount:i||0}}catch(e){throw this.errorSubject.next(e.message),e}finally{this.loadingSubject.next(!1)}}constructor(){this.supabase=h.Z,this.farmsSubject=new m.X([]),this.loadingSubject=new m.X(!1),this.errorSubject=new m.X(null)}}let p=new x,g=new m.X({allFarms:[],filteredFarms:[],searchQuery:"",totalFarmsCount:0,currentPage:1}),b=e=>{g.next({...g.value,...e})},j=()=>g.pipe((0,f.U)(e=>e.filteredFarms)),w=()=>g.pipe((0,f.U)(e=>e.searchQuery));p.fetchFarms(),p.getFarmsObservable().subscribe(e=>{b({allFarms:e,filteredFarms:e})});let v=e=>{b({searchQuery:e}),e.length>=3?y():b({filteredFarms:g.value.allFarms})},y=()=>{let{allFarms:e,searchQuery:t}=g.value;b({filteredFarms:e.filter(e=>e.products.some(e=>e.toLowerCase().includes(t.toLowerCase()))||e.name.toLowerCase().includes(t.toLowerCase()))})};var N=s(11444),k=s(89733),S=s(95173),z=s(54662),F=s(54817),C=s(45293),I=s(11240),V=s(53225),Z=s(36141),E=e=>{let{isOpen:t,onClose:s}=e,a=[{icon:(0,r.jsx)(F.Z,{className:"w-8 h-8 text-blue-500"}),title:"Find Local Farms",description:"Easily search and discover farms in your area."},{icon:(0,r.jsx)(C.Z,{className:"w-8 h-8 text-green-500"}),title:"View Farm Products",description:"See what each farm offers before you visit."}],n=[{icon:(0,r.jsx)(I.Z,{className:"w-8 h-8 text-purple-500"}),title:"Exclusive Events",description:"Join farm tours, workshops, and local food events."},{icon:(0,r.jsx)(V.Z,{className:"w-8 h-8 text-orange-500"}),title:"Early Access",description:"Get first dibs on seasonal and limited-quantity products."},{icon:(0,r.jsx)(Z.Z,{className:"w-8 h-8 text-indigo-500"}),title:"Verified Reviews",description:"Access and contribute to member-only farm reviews."}];return(0,r.jsx)(z.Vq,{open:t,onOpenChange:s,children:(0,r.jsxs)(z.cZ,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(z.fK,{children:[(0,r.jsx)(z.$N,{children:"FarmFinder.net Features"}),(0,r.jsx)(z.Be,{children:"Discover the benefits of using FarmFinder.net and becoming a member."})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"Free for Everyone:"}),a.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start space-x-4",children:[e.icon,(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]})]},t)),(0,r.jsx)("h3",{className:"font-semibold text-lg mt-4",children:"Member Benefits:"}),n.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start space-x-4",children:[e.icon,(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]})]},t))]}),(0,r.jsxs)(z.cN,{className:"flex flex-col sm:flex-row justify-between items-center",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-2 sm:mb-0",children:"Basic features are always free. Upgrade for more benefits!"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(k.z,{onClick:s,variant:"outline",className:"mr-2",children:"Close"}),(0,r.jsx)(k.z,{onClick:()=>{console.log("Sign up clicked"),s()},children:"Become a Member"})]})]})]})})},A=s(77209),D=s(29338);function M(e){let{searchQuery:t,setSearchQuery:s,suggestions:n=[],handleFarmClick:i}=e,[o,l]=(0,a.useState)(-1),c=e=>{"string"==typeof e?s(e):i(e),l(-1)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(A.I,{type:"text",value:t,onChange:e=>{s(e.target.value),l(-1)},onKeyDown:e=>{let t=n.length;t>0&&("ArrowDown"===e.key?(e.preventDefault(),l(e=>e<t-1?e+1:e)):"ArrowUp"===e.key?(e.preventDefault(),l(e=>e>0?e-1:0)):"Enter"===e.key&&(e.preventDefault(),o>=0&&c(n[o])))},placeholder:"Search for products, farms, or keywords...",className:"shadow-md rounded-full p-2 pl-4 w-full text-lg h-12 bg-white border-2 border-[#333333]"}),n.length>0&&(0,r.jsx)("ul",{className:"bg-white border rounded-2xl mt-1 shadow-lg max-h-60 overflow-y-auto",children:n.map((e,t)=>(0,r.jsx)("li",{className:"px-4 py-2 flex flex-col justify-between cursor-pointer ".concat(o===t?"bg-blue-100 text-blue-600":""),onClick:()=>c(e),children:"string"==typeof e?(0,r.jsx)("div",{className:"font-semibold",children:e}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-semibold text-green-600",children:[e.name," (",e.miles," mi)"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.city,", ",e.state]}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:e.products.join(", ")}),e.preferred&&(0,r.jsx)(D.Z,{className:"h-5 w-5 text-yellow-400 flex-shrink-0"})]})},t))})]})}d().Marker.prototype.options.icon=d().icon({iconRetinaUrl:"leaflet/dist/images/marker-icon-2x.png",iconUrl:"leaflet/dist/images/marker-icon.png",shadowUrl:"leaflet/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});let O=["tomatoes","potatoes","carrots","onions","garlic","cabbage","lettuce","cucumbers","zucchini","pumpkins","corn","peas","beans","radishes","spinach","asparagus","broccoli","cauliflower","celery","chives","cilantro","collards","dill","fennel","mint","parsley","thyme","basil"];function R(){let e=(0,N.I0)(),t=u(j())||[],s=u(w())||"",c=(0,a.useMemo)(()=>t||[],[t]),[d,m]=(0,a.useState)([43.2081,-71.5376]),[f,h]=(0,a.useState)(!1),[x,p]=(0,a.useState)(null),[g,b]=(0,a.useState)([]),[y,z]=(0,a.useState)([]),[F,C]=(0,a.useState)([]),I=(0,a.useRef)(null);(0,a.useEffect)(()=>{s.length>=3?(C(O.filter(e=>e.toLowerCase().includes(s.toLowerCase()))),z(c.filter(e=>e.products.some(e=>e.toLowerCase().includes(s.toLowerCase()))))):(C([]),z([]))},[s,c]);let V=[...F,...y],Z=e=>{p(e===x?null:e)},A=()=>/Android/i.test(window.navigator.userAgent),D=()=>/Mobi|Android/i.test(window.navigator.userAgent),R=e=>"geo:".concat(e.latitude,",").concat(e.longitude),L=e=>"https://www.google.com/maps/dir/?api=1&destination=".concat(e.latitude,",").concat(e.longitude),q=(e,t)=>{t.stopPropagation();let s=L(e),r=R(e);A()?window.location.href=r:window.location.href=s};return(0,r.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,r.jsxs)("div",{className:"flex-grow relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 z-0",children:(0,r.jsxs)(n.h,{center:d,zoom:8,className:"h-full w-full",zoomControl:!1,children:[(0,r.jsx)(i.I,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),c.map((e,t)=>(0,r.jsx)(o.J,{position:[e.latitude,e.longitude],eventHandlers:{click:()=>Z(t)},children:(0,r.jsx)(l.G,{interactive:!0,keepInView:!0,children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-semibold text-lg",children:[e.name," (",e.miles," mi)"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.city,", ",e.state]}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:e.products.join(", ")}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("a",{href:"https://".concat(e.website),target:"_blank",rel:"noopener noreferrer",children:"Visit Site"})}),D()&&(0,r.jsx)("div",{className:"mt-3 flex justify-center",children:(0,r.jsxs)("button",{onClick:t=>q(e,t),className:"bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded flex items-center",children:[(0,r.jsx)(S.Z,{className:"mr-2",size:16}),"Navigate"]})})]})})},t))]})}),(0,r.jsx)("div",{ref:I,className:"absolute top-4 left-4 right-4 z-10",children:(0,r.jsx)(M,{searchQuery:s,setSearchQuery:t=>e(v(t)),suggestions:V,handleFarmClick:()=>{}})}),(0,r.jsx)("div",{className:"absolute bottom-24 right-4 z-20",children:(0,r.jsx)(k.z,{onClick:()=>h(!0),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full shadow-lg",children:"Become a Member"})})]}),(0,r.jsx)("footer",{className:"bg-[#f9f7f4] border-t border-gray-300 p-2 text-center text-sm z-30 relative",children:(0,r.jsx)("p",{children:"Quick Guide"})}),(0,r.jsx)(E,{isOpen:f,onClose:()=>h(!1)})]})}},89733:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var r=s(57437),a=s(2265),n=s(71538),i=s(12218),o=s(49354);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,r.jsx)(u,{className:(0,o.cn)(l({variant:a,size:i,className:s})),ref:t,...d})});c.displayName="Button"},54662:function(e,t,s){"use strict";s.d(t,{$N:function(){return x},Be:function(){return p},Vq:function(){return l},cN:function(){return h},cZ:function(){return m},fK:function(){return f},hg:function(){return c}});var r=s(57437),a=s(2265),n=s(13304),i=s(4867),o=s(49354);let l=n.fC,c=n.xz,d=n.h_;n.x8;let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a})});u.displayName=n.aV.displayName;let m=a.forwardRef((e,t)=>{let{className:s,children:a,...l}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(n.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l,children:[a,(0,r.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.Pxu,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName;let f=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};f.displayName="DialogHeader";let h=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};h.displayName="DialogFooter";let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",s),...a})});x.displayName=n.Dx.displayName;let p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...a})});p.displayName=n.dk.displayName},77209:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var r=s(57437),a=s(2265),n=s(49354);let i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},49354:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(44839),a=s(96164);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},11818:function(e,t,s){"use strict";let r=(0,s(84593).eI)("https://oqazayxdhkmsafqoxahe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xYXpheXhkaGttc2FmcW94YWhlIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcyNzM2MjkyMywiZXhwIjoyMDQyOTM4OTIzfQ.qC4yQPYvVWkDtafJqgcA57jOzR3WeaGvL07zhhDY44I");t.Z=r}},function(e){e.O(0,[733,310,212,976,269,593,377,971,23,744],function(){return e(e.s=26042)}),_N_E=e.O()}]);
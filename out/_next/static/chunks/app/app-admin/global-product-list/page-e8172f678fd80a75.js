(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[492],{76360:function(e,t,n){Promise.resolve().then(n.bind(n,60583))},60583:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var i=n(57437),a=n(2265),r=n(76548),l=n(17156),s=n(83719),c=n(61096),o=n(80824),d=n(66124),u=n(23983),h=n(98784),m=n(87869),p=n(11818);let f=async()=>{let{data:e,error:t}=await p.Z.from("products").select("*");return t?(console.error("Error fetching products:",t),[]):e},x=async e=>{let{data:t,error:n}=await p.Z.from("products").insert(e).select().single();return n?(console.error("Error adding product:",n),null):t},Z=async(e,t)=>{let{data:n,error:i}=await p.Z.from("products").update(t).eq("id",e).select().single();return i?(console.error("Error updating product:",i),null):n},w=async e=>{let{error:t}=await p.Z.from("products").delete().eq("id",e);return!t||(console.error("Error deleting product:",t),!1)};var y=()=>{let[e,t]=(0,a.useState)([]),[n,p]=(0,a.useState)(!1),[y,I]=(0,a.useState)(null),[g,j]=(0,a.useState)({name:""}),[C,k]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{t(await f())})()},[]);let v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;k(!!e),I(e),j(e||{name:""}),p(!0)},b=()=>{p(!1),I(null),j({name:""})},N=async()=>{if(C&&y){let e=await Z(y.id,g);e&&t(t=>t.map(t=>t.id===y.id?e:t))}else{let e=await x(g);e&&t(t=>[...t,e])}b()},S=async n=>{await w(n)&&t(e.filter(e=>e.id!==n))},z=e.map(e=>({id:e.id,name:e.name}));return(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(s.Z,{variant:"h4",sx:{mb:2},children:(0,i.jsx)("span",{className:"text-2xl font-bold",children:"Global Product List"})}),(0,i.jsx)(r.Z,{variant:"contained",color:"primary",sx:{mb:2},onClick:()=>v(),children:"Add New Product"}),(0,i.jsx)("div",{style:{height:400,width:"100%"},children:(0,i.jsx)(m._,{rows:z,columns:[{field:"name",headerName:"Product Name",width:200,editable:!1},{field:"actions",headerName:"Actions",width:200,renderCell:e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Z,{variant:"contained",size:"small",onClick:()=>v(e.row),style:{marginRight:10},children:"Edit"}),(0,i.jsx)(r.Z,{variant:"contained",size:"small",color:"secondary",onClick:()=>S(e.row.id),children:"Delete"})]})}],initialState:{pagination:{paginationModel:{pageSize:5,page:0}}},pageSizeOptions:[5],disableRowSelectionOnClick:!0})}),(0,i.jsxs)(c.Z,{open:n,onClose:b,children:[(0,i.jsx)(o.Z,{children:C?"Edit Product":"Add New Product"}),(0,i.jsx)(d.Z,{children:(0,i.jsx)(u.Z,{label:"Product Name",fullWidth:!0,value:g.name,onChange:e=>j({...g,name:e.target.value}),sx:{mb:2}})}),(0,i.jsxs)(h.Z,{children:[(0,i.jsx)(r.Z,{onClick:b,color:"secondary",children:"Cancel"}),(0,i.jsx)(r.Z,{onClick:N,color:"primary",children:C?"Update":"Save"})]})]})]})}},11818:function(e,t,n){"use strict";let i=(0,n(84593).eI)("https://oqazayxdhkmsafqoxahe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xYXpheXhkaGttc2FmcW94YWhlIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcyNzM2MjkyMywiZXhwIjoyMDQyOTM4OTIzfQ.qC4yQPYvVWkDtafJqgcA57jOzR3WeaGvL07zhhDY44I");t.Z=i}},function(e){e.O(0,[593,587,372,971,23,744],function(){return e(e.s=76360)}),_N_E=e.O()}]);